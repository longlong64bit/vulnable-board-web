# 전자금융기반시설 보안 취약점 평가기준(웹_모바일_HTS) — 내부 테스트 가이드

본 문서는 **전자금융기반시설_보안_취약점_평가기준(제2026-1호).xlsx** 의 **웹_모바일_HTS** 탭 항목을 기준으로, 본 프로젝트(vuln-board)에서 **웹** 환경으로 테스트할 수 있는 항목을 매핑한 가이드입니다.

- **기준 URL**: `http://127.0.0.1:8888` (또는 실제 접속 주소)
- **용도**: 내부 보안 취약점 점검·교육·PoC 전용 (운영 환경 사용 금지)

---

## 1. 웹에서 테스트 가능한 항목 — 매핑표

| NO | 점검 분류 | 평가 항목 | 테스트 위치/방법 | 비고 |
|----|-----------|-----------|------------------|------|
| 1 | 서비스 보호 | **SQL Injection** | 로그인: `userId`에 `' OR '1'='1` 등<br>게시판 목록: `keyword`, `orderBy` 파라미터 조작 (예: `orderBy=id; DROP TABLE board;--`) | AuthController, BoardRepository |
| 2 | 서비스 보호 | **악성파일 업로드** | 게시글 상세 → 파일 첨부. jsp, exe, script 등 확장자/타입 검증 없음 | `/file/upload`, BoardController |
| 3 | 서비스 보호 | **부적절한 이용자 인가(IDOR)** | 다른 사용자 게시글의 첨부파일 `id`만 알면 `/file/download/{id}` 로 다운로드 가능 | `/file/download/{id}` |
| 4 | 서비스 보호 | **파일 다운로드(Path Traversal)** | `/file/get?name=../../../etc/passwd` 등으로 서버 내 파일 접근 시도 | `/file/get?name=...` |
| 5 | 서비스 보호 | **크로스 사이트 스크립팅(XSS)** | Stored: 게시글 제목/내용, 댓글에 `<script>alert(1)</script>` 등 입력 후 조회<br>Reflected: 게시판 목록 검색어 `keyword` 그대로 출력 | 게시판 쓰기/댓글, `/board/list?keyword=...` |
| 6 | 서비스 보호 | **크로스사이트 요청변조(CSRF)** | 로그인 상태에서 외부 사이트에서 게시글 삭제/수정 폼 POST 요청 시 토큰 없이 처리 | 게시판 수정/삭제, 회원가입 등 |
| 7 | 서비스 보호 | **리다이렉트를 이용한 피싱** | `/redirect?url=https://evil.com` 등으로 외부 사이트로 리다이렉트 | `/redirect?url=...` |
| 8 | 서비스 보호 | **운영체제 명령실행** | 로그인 후 `/cmd?exec=id` 또는 `exec=whoami` 등 사용자 입력을 그대로 exec()에 전달 | `/cmd?exec=...` (로그인 필요) |
| 9 | 서비스 보호 | **XML 외부객체 공격(XXE)** | POST `/xml`, Content-Type: application/xml, Body에 외부 엔티티 참조 XML 전송 | `POST /xml` (로그인 필요) |
|10 | 서비스 보호 | **서버 사이드 요청 위조(SSRF)** | 로그인 후 `/fetch?url=http://169.254.169.254/latest/meta-data/` 등 내부/외부 URL 요청 | `/fetch?url=...` (로그인 필요) |
|11 | 서비스 보호 | **서버 사이드 템플릿 인젝션(SSTI)** | `/ssti?name=__${T(java.lang.Runtime).getRuntime().exec('id')}__` 등 Thymeleaf 표현식 주입 | `/ssti?name=...` |
|12 | 서비스 보호 | **관리자 페이지 노출** | 인증 없이 `/admin` 접근 가능, 서버 정보 등 노출 | `/admin` |
|13 | 서비스 보호 | **디렉토리 목록 노출** | 로그인 후 `/dir` 또는 `/dir?path=..` 로 업로드 디렉토리 목록 조회 | `/dir`, `/dir?path=...` (로그인 필요) |
|13-1 | 서비스 보호 | **인덱스 파일 없음/디렉토리 리스팅 허용** | 인덱스 파일이 없거나 디렉토리 리스팅이 허용된 경우 하위 파일·디렉터리 목록이 출력되는지 점검. 평가 예시: URL에 디렉터리 명을 입력했을 때 하위 파일 및 디렉터리 목록 출력 여부 | 웹 서버 설정으로 리스팅 허용됨. `/uploads/` 접속 시 인덱스 파일 없으면 디렉터리 목록 HTML 출력 |
|14 | 서비스 보호 | **시스템 운영정보 노출** | 로그인 후 `/debug` 에서 Java/OS/사용자 등 정보 노출 | `/debug` (로그인 필요) |
|15 | 서비스 보호 | **불필요한 파일 노출** | 업로드된 파일명/경로 추측 또는 디렉토리 목록으로 접근 | `/dir`, `/file/get` |
|16 | 서비스 보호 | **불충분한 이용자 인증** | 일부 기능(예: /admin) 인증 없이 접근 가능 | `/admin`, `/redirect` |
|17 | 서비스 보호 | **무제한 요청 허용(자동화공격)** | 로그인 시도, 댓글 등에 rate limit 없음 | 로그인, 댓글, API 전반 |
|18 | 서비스 보호 | **세션정보 재사용** | 동일 세션 ID로 다른 브라우저/기기에서 재사용 가능 (테스트 시 확인) | 세션 고정 등 |
|19 | 이용자 인증 | **이용자 인증정보 재사용** | 비밀번호 변경 없이 장기 동일 비밀번호 사용 가능 | 정책/기능 점검 |
|20 | 이용자 인증 | **고정된 인증정보 이용** | 기본 계정/비밀번호 사용 가능 (테스트용 계정 생성 후 확인) | 회원가입 후 로그인 |
|21 | 이용자 인증 | **유추가능한 인증정보** | 비밀번호 평문 저장, 단순 비밀번호 허용 | DB/회원가입 |
|22 | 이용자 인증 | **유추가능한 초기화 비밀번호** | (초기화 기능 구현 시 고정/유추 가능 값 사용 시 취약) | 해당 기능 있으면 점검 |
|23 | 이용자 인증 | **유추 가능한 세션ID** | JSESSIONID 등 세션 ID 추측 가능성 점검 | 쿠키 확인 |
|24 | 이용자 인증 | **쿠키변조** | 세션 쿠키에 HttpOnly/Secure 미적용 시 변조·탈취 위험 | 쿠키 속성 점검 |
|25 | 이용자 인증 | **인증 오류 횟수 제한기능** | 로그인 실패 횟수 제한 없음 | 로그인 여러 번 실패 |
|26 | 이용자 인증 | **불충분한 세션종료 처리** | 로그아웃 후에도 세션 유효 여부 등 점검 | `/logout` 후 세션 검증 |
|27 | 데이터 보호 | **통신구간 암호화** | HTTP 서비스로 TLS 미적용 (점검 환경에서 확인) | 브라우저 주소창 http |
|28 | 데이터 보호 | **취약한 HTTPS 프로토콜/암호** | HTTPS 적용 시 프로토콜·암호 스위트 점검 (본 앱은 HTTP) | N/A (HTTP만 제공 시) |
|29 | 거래 인증 (전자금융) | **거래 인증수단 검증 오류** | (결제 기능 없음 — 전자금융 결제 모듈 확장 시 점검) | — |
|30 | 거래 인증 (전자금융) | **비밀번호 변경 시 본인확인/이전 비밀번호 재사용** | (비밀번호 변경 기능 없음 — 추가 시 점검) | — |

※ 앱/HTS 전용 항목(OS 변조 탐지, 앱 소스코드 난독화, 디버깅 탐지, 단말기 내 중요정보 저장 등)은 **웹 앱에서는 해당 없음**으로 두고, 필요 시 별도 모바일/HTS 대상으로 점검.

---

## 2. 주요 테스트 시나리오 (요약)

### 2.1 SQL Injection
- **로그인**: 아이디에 `' OR '1'='1` 입력, 비밀번호 아무 값.
- **게시판 검색**: `/board/list?keyword=a' OR '1'='1` 또는 `orderBy=id; SELECT * FROM users--`.

### 2.2 XSS
- **Stored**: 게시글 제목/내용 또는 댓글에 `<script>alert(document.domain)</script>` 입력 후 해당 글/댓글 조회.
- **Reflected**: `/board/list?keyword=<script>alert(1)</script>`.

### 2.3 파일 업로드/다운로드
- **악성파일 업로드**: 게시글 상세에서 확장자 제한 없이 임의 파일 업로드.
- **Path Traversal**: 로그인 후 `GET /file/get?name=../../../etc/passwd` (또는 컨테이너 내 경로).

### 2.4 기타 엔드포인트
- **Open Redirect**: `GET /redirect?url=https://evil.com`
- **SSRF**: 로그인 후 `GET /fetch?url=http://internal-server/sensitive`
- **OS 명령**: 로그인 후 `GET /cmd?exec=id` (Linux 컨테이너 기준).
- **XXE**: 로그인 후 `POST /xml`, Body에 외부 엔티티를 참조하는 XML.
- **SSTI**: `GET /ssti?name=__${T(java.lang.Runtime).getRuntime().exec('id')}__` (Thymeleaf 문법에 따라 조정).
- **관리자/디렉토리/디버그**: `GET /admin`, `GET /dir`, `GET /debug` (로그인 필요 항목은 세션 필요).

### 2.5 인덱스 파일 없음 / 디렉토리 리스팅 허용

- **점검 내용**: 인덱스 파일이 없거나 웹 서버가 디렉토리 리스팅을 허용하도록 설정된 경우, URL에 디렉터리 경로를 입력했을 때 하위 파일·디렉터리 목록이 출력되는지 확인.
- **테스트**: `GET /uploads/` 접속. (설정상 리스팅이 허용되어 있음.) 인덱스 파일이 없으면 업로드 디렉터리 내 파일·하위 디렉터리 목록이 HTML로 출력됨. 하위 디렉터리 링크로 이동하면 해당 경로 목록도 조회 가능.

---

## 3. 환경 구성 및 실행

- **Docker**: 프로젝트 루트에서 `docker compose up -d --build`
- **접속**: `http://127.0.0.1:8888`
- **회원가입/로그인**: 최초 사용 시 회원가입 후 로그인하여 게시판·댓글·파일·추가 엔드포인트 테스트.

---

## 4. 참고

- 본 가이드는 **전자금융기반시설 보안취약점 평가기준**의 **웹** 관련 항목을 중심으로 정리했습니다.
- **웹_모바일_HTS** 엑셀 탭의 정확한 번호·문구는 해당 xlsx 파일을 기준으로 하며, 연도별 개정 시 항목 번호가 달라질 수 있습니다.
- **모바일·HTS** 전용 항목은 웹 앱으로는 재현 불가하므로, 별도 앱/HTS 빌드 및 점검 환경이 필요합니다.
